<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Una Sorpresa para Ti!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Evita el scroll durante las animaciones */
            margin: 0;
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .content-container {
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #birthday-content.hidden {
            display: none;
        }

        .font-lobster {
            font-family: 'Lobster', cursive;
        }

        /* Animación de la explosión */
        @keyframes explode-in {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            60% {
                transform: scale(1.1) rotate(-3deg);
                opacity: 1;
            }
            80% {
                transform: scale(0.95) rotate(3deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
            }
        }

        .animate-explode-in {
            animation: explode-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        /* Animación de temblor de pantalla */
        @keyframes screen-shake {
            0%, 100% { transform: translate(0, 0); }
            10%, 30%, 50%, 70%, 90% { transform: translate(-3px, 3px); }
            20%, 40%, 60%, 80% { transform: translate(3px, -3px); }
        }
        .animate-screen-shake {
            animation: screen-shake 0.3s ease-in-out;
        }

        /* Animación para la mecha de la bomba */
        @keyframes sparkle {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
                background-color: #fef08a; /* yellow-200 */
            }
            50% {
                transform: scale(1.5);
                opacity: 0.5;
                background-color: #fca5a5; /* red-300 */
            }
        }

        .animate-sparkle {
            animation: sparkle 1s infinite;
        }
        
        /* Animación del ESTALLIDO de confeti */
        @keyframes confetti-burst {
            0% {
                transform: translate(0, 0) rotate(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) rotate(var(--r)) scale(0);
                opacity: 0;
            }
        }

        .confetti-burst-particle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            opacity: 0;
            animation: confetti-burst 1.2s ease-out forwards;
        }

        /* Animación de la LLUVIA de confeti */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }

        .confetti-fall-particle {
            position: absolute;
            top: 0;
            left: 0;
            width: 12px;
            height: 12px;
            opacity: 0.8;
            animation: confetti-fall 8s linear infinite;
        }

        /* Animación para el corazón del pinguino */
        @keyframes pulse-heart {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .animate-pulse-heart {
            animation: pulse-heart 2s infinite ease-in-out;
            transform-origin: center;
        }
    </style>
</head>
<body class="bg-gray-900">

    <!-- Canvas para el fondo 3D -->
    <canvas id="bg-canvas"></canvas>

    <!-- Contenedor para el contenido superpuesto -->
    <div class="content-container">
        <!-- Pantalla de Carga -->
        <div id="loader" class="flex flex-col items-center justify-center text-center text-white transition-opacity duration-500">
            <svg class="animate-spin h-12 w-12 text-pink-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="text-xl font-lobster tracking-wider">Cargando sorpresa...</p>
        </div>

        <!-- Contenido de Cumpleaños (inicialmente oculto) -->
        <div id="birthday-content" class="hidden">
            <!-- Contenedor del confeti -->
            <div id="confetti-container" class="absolute inset-0 pointer-events-none"></div>

            <div class="flex flex-col md:flex-row items-center justify-center text-center p-4">
                <!-- La Bomba -->
                <div class="relative animate-explode-in">
                    <!-- Mecha de la bomba -->
                    <div class="absolute -top-8 left-1/2 -translate-x-1/2 w-14 h-10 rounded-full border-t-4 border-r-4 border-gray-600 transform -rotate-45" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0; border-top-right-radius: 40px; border-top-left-radius: 0; border-color: transparent transparent transparent #4a5568;"></div>
                    <div class="absolute -top-12 left-1/2 ml-4 w-3 h-3 bg-yellow-200 rounded-full animate-sparkle"></div>
                    
                    <!-- Cuerpo de la bomba -->
                    <div class="w-60 h-60 sm:w-72 sm:h-72 md:w-80 md:h-80 bg-gray-800 rounded-full flex flex-col items-center justify-center shadow-2xl border-4 border-gray-700 p-4 sm:p-6">
                        <h1 class="font-lobster text-4xl sm:text-5xl md:text-6xl text-pink-400 drop-shadow-lg">¡Feliz Cumpleaños!</h1>
                        <p class="text-white mt-4 text-base sm:text-lg md:text-xl">Espero que la pases bien y disfruta este feliz cumpleaños, te quiero :3</p>
                        <p class="text-gray-400 mt-6 text-base md:text-lg">- att: Pinguino 🐧</p>
                    </div>
                </div>
                
                <!-- Pinguino con Corazón -->
                <div class="animate-explode-in w-32 h-40 sm:w-36 sm:h-44 md:w-40 md:h-52 mt-4 md:mt-0 md:ml-8" style="animation-delay: 0.1s;">
                    <svg viewBox="0 0 160 200" class="w-full h-full drop-shadow-lg">
                        <!-- Aletas del pinguino -->
                        <path d="M25,120 C-10,140 20,180 35,160 Z" fill="#4a5568" />
                        <path d="M135,120 C170,140 140,180 125,160 Z" fill="#4a5568" />
                        
                        <!-- Cuerpo -->
                        <ellipse cx="80" cy="135" rx="55" ry="65" fill="#2d3748" />
                        <!-- Panza -->
                        <ellipse cx="80" cy="140" rx="40" ry="55" fill="white" />
                        
                        <!-- Ojos -->
                        <circle cx="65" cy="100" r="7" fill="black" />
                        <circle cx="95" cy="100" r="7" fill="black" />
                        <circle cx="63" cy="98" r="2" fill="white" />
                        <circle cx="93" cy="98" r="2" fill="white" />
                        
                        <!-- Pico -->
                        <path d="M80 110 L90 120 L70 120 Z" fill="#f6ad55" />
                        
                        <!-- Corazón -->
                        <g class="animate-pulse-heart">
                            <path d="M80 65 C 60 45, 45 60, 80 90 C 115 60, 100 45, 80 65 Z" fill="#ef4444" stroke="#c53030" stroke-width="2"/>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Lógica del cargador y confeti ---
        const loader = document.getElementById('loader');
        const birthdayContent = document.getElementById('birthday-content');
        const confettiContainer = document.getElementById('confetti-container');
        const colors = ['bg-pink-500', 'bg-yellow-400', 'bg-green-400', 'bg-blue-500', 'bg-purple-500', 'bg-red-500'];

        function createConfettiBurst() {
            const confettiCount = 100;
            const fragment = document.createDocumentFragment();

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                
                confetti.className = `confetti-burst-particle ${randomColor}`;
                
                const angle = Math.random() * 360;
                const radius = Math.random() * (Math.min(window.innerWidth, window.innerHeight) / 2);
                
                const tx = Math.cos(angle * Math.PI / 180) * radius;
                const ty = Math.sin(angle * Math.PI / 180) * radius;
                const r = Math.random() * 720; // Rotación

                confetti.style.setProperty('--tx', `${tx}px`);
                confetti.style.setProperty('--ty', `${ty}px`);
                confetti.style.setProperty('--r', `${r}deg`);
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                fragment.appendChild(confetti);
            }
            confettiContainer.appendChild(fragment);
        }

        function createFallingConfetti() {
            const confettiCount = 50;
             const fragment = document.createDocumentFragment();

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.className = `confetti-fall-particle ${randomColor}`;
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.animationDelay = `${Math.random() * 8}s`;
                confetti.style.width = `${Math.floor(Math.random() * 6) + 8}px`;
                confetti.style.height = confetti.style.width;
                confetti.style.borderRadius = '50%';
                fragment.appendChild(confetti);
            }
            confettiContainer.appendChild(fragment);
        }
        
        function showBirthdaySurprise() {
             // Efecto de temblor
            document.body.classList.add('animate-screen-shake');
            setTimeout(() => {
                document.body.classList.remove('animate-screen-shake');
            }, 300);

            createConfettiBurst();
            setTimeout(createFallingConfetti, 500); // La lluvia empieza poco después de la explosión
        }

        setTimeout(() => {
            loader.classList.add('opacity-0');
            setTimeout(() => {
                loader.classList.add('hidden');
                birthdayContent.classList.remove('hidden');
                showBirthdaySurprise();
            }, 500);
        }, 8000);

        // --- Lógica del fondo 3D con Three.js ---
        let scene, camera, renderer, stars;
        const mouse = { x: 0, y: 0 };

        function init3D() {
            // Escena
            scene = new THREE.Scene();
            
            // Cámara
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 4;

            // Renderer
            const canvas = document.getElementById('bg-canvas');
            renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
            renderer.setClearColor(0x000000, 0); // Fondo transparente
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // Luces
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1);
            pointLight.position.set(5, 5, 5);
            scene.add(pointLight);

            // Partículas (Estrellas)
            stars = createStars();
            scene.add(stars);

            // Event Listeners
            window.addEventListener('resize', onWindowResize);
            document.addEventListener('mousemove', onMouseMove);
            window.addEventListener('deviceorientation', onDeviceOrientation, true);


            animate();
        }

        function createStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.02 });
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                if (Math.sqrt(x*x + y*y + z*z) > 20) {
                    starVertices.push(x, y, z);
                }
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            return new THREE.Points(starGeometry, starMaterial);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onDeviceOrientation(event) {
            // event.gamma es la inclinación de izquierda a derecha en grados, rango [-90, 90]
            // event.beta es la inclinación de adelante hacia atrás en grados, rango [-180, 180]
            if (event.gamma === null || event.beta === null) {
                return;
            }

            // Limitar los valores para un efecto más suave y menos extremo.
            const gamma = Math.max(-45, Math.min(45, event.gamma)); // Inclinación izq/der
            const beta = Math.max(-45, Math.min(45, event.beta));  // Inclinación adelante/atrás

            // Normalizar los valores al rango [-1, 1], similar al movimiento del mouse.
            mouse.x = gamma / 45;
            // Invertir beta para que coincida con la dirección del eje Y del mouse
            mouse.y = -(beta / 45);
        }

        function animate() {
            requestAnimationFrame(animate);

            stars.rotation.y += 0.0001;
            
            // El suavizado hace que la cámara se mueva hacia la posición del mouse/inclinación
            camera.position.x += (mouse.x * 2 - camera.position.x) * 0.02;
            camera.position.y += (-mouse.y * 2 - camera.position.y) * 0.02;
            camera.lookAt(scene.position);

            renderer.render(scene, camera);
        }
        
        // Iniciar la escena 3D cuando la ventana se haya cargado
        window.onload = function () {
            init3D();
        }
    </script>
</body>
</html>

